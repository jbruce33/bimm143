% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\title{Class 6: R Functions}
\author{Jaime Bruce (PID: A16568558)}
\date{2/3/2022}

\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Class 6: R Functions},
  pdfauthor={Jaime Bruce (PID: A16568558)},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\begin{document}
\maketitle

Today we will explore R functions.

We will start with calculating a grade for these example students.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Example input vectors to start with}
\NormalTok{student1 }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{100}\NormalTok{, }\DecValTok{100}\NormalTok{, }\DecValTok{100}\NormalTok{, }\DecValTok{100}\NormalTok{, }\DecValTok{100}\NormalTok{, }\DecValTok{100}\NormalTok{, }\DecValTok{100}\NormalTok{, }\DecValTok{90}\NormalTok{)}
\NormalTok{student2 }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{100}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\DecValTok{90}\NormalTok{, }\DecValTok{90}\NormalTok{, }\DecValTok{90}\NormalTok{, }\DecValTok{90}\NormalTok{, }\DecValTok{97}\NormalTok{, }\DecValTok{80}\NormalTok{)}
\NormalTok{student3 }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{90}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\ConstantTok{NA}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

We could use the mean() function to calculate an average

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(student3, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 90
\end{verbatim}

How does the is.na() function work? Let's try it out on student2.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{student2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 100  NA  90  90  90  90  97  80
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{is.na}\NormalTok{(student2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
\end{verbatim}

We can use this result to get at our NA values (i.e.~the TRUE positions)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{student2[}\FunctionTok{is.na}\NormalTok{(student2)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] NA
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{1}\SpecialCharTok{:}\DecValTok{5}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 2 3 4 5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[x }\SpecialCharTok{\textgreater{}} \DecValTok{2}\NormalTok{] }\OtherTok{\textless{}{-}} \DecValTok{100}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]   1   2 100 100 100
\end{verbatim}

Put these two things together - mean() is.na() function.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{student2[ }\FunctionTok{is.na}\NormalTok{(student2) ] }\OtherTok{\textless{}{-}} \DecValTok{0}
\FunctionTok{mean}\NormalTok{(student2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 79.625
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{student3[ }\FunctionTok{is.na}\NormalTok{(student3) ] }\OtherTok{\textless{}{-}} \DecValTok{0}
\FunctionTok{mean}\NormalTok{(student3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 11.25
\end{verbatim}

Now we want to find the lowest score\ldots{}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{student1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 100 100 100 100 100 100 100  90
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{which.min}\NormalTok{(student1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 8
\end{verbatim}

The which.min() function tells us where the smallest value is.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}}\NormalTok{ student1[ }\SpecialCharTok{{-}}\FunctionTok{which.min}\NormalTok{(student1) ]}
\FunctionTok{mean}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 100
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}}\NormalTok{ student2}
\NormalTok{x[ }\FunctionTok{is.na}\NormalTok{(x) ] }\OtherTok{\textless{}{-}} \DecValTok{0}
\NormalTok{x }\OtherTok{\textless{}{-}}\NormalTok{ x[ }\SpecialCharTok{{-}}\FunctionTok{which.min}\NormalTok{(x) ]}
\FunctionTok{mean}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 91
\end{verbatim}

We are close to our working code snipet that will be th body of our
first function

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# First set NA values to zero}
\NormalTok{x[ }\FunctionTok{is.na}\NormalTok{(x) ] }\OtherTok{\textless{}{-}} \DecValTok{0}
\CommentTok{\# Remove lowest score and calculate average}
\FunctionTok{mean}\NormalTok{( x[}\SpecialCharTok{{-}}\FunctionTok{which.min}\NormalTok{(x) ] )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 92.83333
\end{verbatim}

Now we can turn this into our first function. We will call this function
`grade()'

All R functions have 3 things - a name (grade) - input arguments
(student scores) - body (does the work!)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grade }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x) \{}
  \CommentTok{\# First set NA values to zero}
\NormalTok{  x[ }\FunctionTok{is.na}\NormalTok{(x) ] }\OtherTok{\textless{}{-}} \DecValTok{0}
  \CommentTok{\# Remove lowest score and calculate average}
  \FunctionTok{mean}\NormalTok{( x[}\SpecialCharTok{{-}}\FunctionTok{which.min}\NormalTok{(x) ] )}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Le'ts try it out

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{grade}\NormalTok{(student3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 12.85714
\end{verbatim}

\begin{quote}
Q1. Write a function grade() to determine an overall grade from a vector
of student homework assignment scores dropping the lowest single score.
If a student misses a homework (i.e.~has an NA value) this can be used
as a score to be potentially dropped. Your final function should be
adquately explained with code comments and be able to work on an example
class gradebook such as this one in CSV format:
``\url{https://tinyurl.com/gradeinput}'' {[}3pts{]}
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gradebook }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://tinyurl.com/gradeinput"}\NormalTok{, }\AttributeTok{row.names=}\DecValTok{1}\NormalTok{)}
\FunctionTok{head}\NormalTok{(gradebook)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##           hw1 hw2 hw3 hw4 hw5
## student-1 100  73 100  88  79
## student-2  85  64  78  89  78
## student-3  83  69  77 100  77
## student-4  88  NA  73 100  76
## student-5  88 100  75  86  79
## student-6  89  78 100  89  77
\end{verbatim}

We can use the `apply()' function to grade the whole class.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{scores }\OtherTok{\textless{}{-}} \FunctionTok{apply}\NormalTok{(gradebook, }\DecValTok{1}\NormalTok{, grade)}
\end{Highlighting}
\end{Shaded}

\begin{quote}
Q2. Using your grade() function and the supplied gradebook, Who is the
top scoring student overall in the gradebook? {[}3pts{]}
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{which.max}\NormalTok{(scores)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## student-18 
##         18
\end{verbatim}

\begin{quote}
Q3. From your analysis of the gradebook, which homework was toughest on
students (i.e.~obtained the lowest scores overall? {[}2pts{]}
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hw.mean }\OtherTok{\textless{}{-}} \FunctionTok{apply}\NormalTok{(gradebook, }\DecValTok{2}\NormalTok{, mean, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{which.min}\NormalTok{( hw.mean )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## hw3 
##   3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{boxplot}\NormalTok{(gradebook)}
\end{Highlighting}
\end{Shaded}

\includegraphics{class06_files/figure-latex/unnamed-chunk-18-1.pdf}

\end{document}
